# 设计模式

## 1 类与类之间的关系

* 关联关系（单向关联、双向关联、自关联）：是对象之间的一种引用关系，用于表示一类对象与另一类对象之间的联系
  * 例如老师和学生、师傅和徒弟
  * 带箭头的实线
* 聚合关系：强关联关系，整体和部分之间的关系，但是成员对象可以脱离整体对象而独立存在
  * 例如学校与老师的关系，学校包含老师，但是学校停办了，老师依然存在
  * 带空心菱形的实线，菱形指向整体
* 组合关系：更强烈的聚合关系，整体对象控制部分对象的生命周期，部分对象不能脱离整体对象而存在
  * 例如头和嘴的关系，没有了头，嘴也就不存在了
  * 带实心菱形的实线，菱形指向整体
* 依赖关系：使用关系，是对象之间耦合度最弱的一种关联方式
  * 某个类的方法通过局部变量、方法的参数或者对静态方法的调用来访问另一个类（被依赖类）中的某些方法来完成一些职责
  * 带箭头的虚线，箭头从使用类指向被依赖的类
* 继承关系：对象之间耦合度最大的一种关系
  * 空芯三角箭头的实线，箭头从子类指向父类
* 实现关系：接口与实现类之间的关系
  * 空心三角箭头的虚线，箭头从实现类指向接口

## 2 软件设计原则

### （1）开闭原则

* 对扩展开放，对修改关闭
* 在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。

### （2）里氏代换原则

* 任何父类可以出现的地方，子类一定可以出现
* 子类可以扩展父类的功能，但不能改变父类原有的功能

### （3）依赖倒转原则

* 高层模块不应该依赖低层模块，两者都应该依赖其抽象；抽象不应该依赖细节，细节应该依赖抽象
* 简单地说就是要求对抽象进行编程，不要对实现进行编程，这样就降低了客户与实现模块间的耦合

### （4）接口隔离原则

* 客户端不应该被迫依赖于它不使用的方法，一个类对应一个类的依赖应该建立在最小的接口上

### （5）迪米特法则

* 只和你的直接朋友交谈，不跟“陌生人”说话
* 如果两个软件实体无序直接通信，那么久不应当发生直接的相互调用，可以通过第三方转发该调用。其目的是降低类之间的耦合度，提高模块的相对独立性

### （6）合成复用原则

* 尽量先使用组合或聚合等关联关系来实现，其次才考虑使用继承关系来实现

## 3 创建者模式

* 创建者模式的主要关注点是“怎样创建对象？”，它的主要特点是“将对象的创建与使用分离”
* 这样可以降低系统的耦合度，使用者不需要关注对象的创建细节

### （1）单例设计模式

* 这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。
* 这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。

#### a 单例模式的实现

* 饿汉式
  * 类加载时就会导致该单例对象被创建
* 懒汉式
  * 类加载时不会导致该单例对象被创建，而是首次使用该对象时才会创建

### （2）工厂方法模式

### （3）抽象工程模式

### （4）原型模式

### （5）建造者模式